#!/bin/bash
#this is the ashs longitudinal script for TOMCAT 
#data should be processed using antsLongitudinalCorticalThickness beforehand. 
#Processing will be completed for participants with 2 time points and then 3 if they have them.
#15/11/18
#Thomas Shaw

subjName=$1
source ~/.bashrc

mkdir -p /data/fasttemp/uqtshaw/tomcat/data/derivatives/4_long_ashs/${subjName}_long_ashs_JLF_3TP /data/fasttemp/uqtshaw/tomcat/data/derivatives/4_long_ashs/${subjName}_long_ashs_JLF_2TP_2-3 /data/fasttemp/uqtshaw/tomcat/data/derivatives/4_long_ashs/${subjName}_long_ashs_JLF_2TP_1-2 /data/fasttemp/uqtshaw/tomcat/data/derivatives/4_long_ashs/${subjName}_long_ashs_JLF_3TP /data/fasttemp/uqtshaw/tomcat/data/derivatives/4_long_ashs/${subjName}_long_ashs_v1_2TP_1-2 /data/fasttemp/uqtshaw/tomcat/data/derivatives/4_long_ashs/${subjName}_long_ashs_v1_2TP_2-3

export ASHS_ROOT=/data/lfs2/software/tools/ASHS/ashs-fastashs_beta

#label the SSTs
$ASHS_ROOT/bin/ashs_main.sh -a /data/lfs2/software/ubuntu14/ashs/ashs_atlas_upennpmc_20170810/ -g /data/fasttemp/uqtshaw/tomcat/data/derivatives/4_long_ashs/SST_creation/${subjName}_3_timepoints/${subjName}_3_timepoints_template0.nii.gz -f /data/fasttemp/uqtshaw/tomcat/data/derivatives/4_long_ashs/SST_creation/${subjName}_3_timepoints/${subjName}_3_timepoints_template1.nii.gz -I ${subjName}_ashs_3TP_SST -w /data/fasttemp/uqtshaw/tomcat/data/derivatives/4_long_ashs/${subjName}_ashs_3TP_SST &

$ASHS_ROOT/bin/ashs_main.sh -a /data/lfs2/software/ubuntu14/ashs/ashs_atlas_upennpmc_20170810/ -g /data/fasttemp/uqtshaw/tomcat/data/derivatives/4_long_ashs/SST_creation/${subjName}_2_timepoints/${subjName}_2_timepoints_template0.nii.gz -f /data/fasttemp/uqtshaw/tomcat/data/derivatives/4_long_ashs/SST_creation/${subjName}_2_timepoints/${subjName}_2_timepoints_template1.nii.gz -I ${subjName}_ashs_2TP_1-2_SST -w /data/fasttemp/uqtshaw/tomcat/data/derivatives/4_long_ashs/${subjName}_ashs_2TP_1-2_SST &

$ASHS_ROOT/bin/ashs_main.sh -a /data/lfs2/software/ubuntu14/ashs/ashs_atlas_upennpmc_20170810/ -g /data/fasttemp/uqtshaw/tomcat/data/derivatives/4_long_ashs/SST_creation/${subjName}_2TP_2-3/${subjName}_2TP_2-3_template0.nii.gz -f /data/fasttemp/uqtshaw/tomcat/data/derivatives/4_long_ashs/SST_creation/${subjName}_2TP_2-3/${subjName}_2TP_2-3_template1.nii.gz -I ${subjName}_ashs_2TP_2-3_SST -w /data/fasttemp/uqtshaw/tomcat/data/derivatives/4_long_ashs/${subjName}_ashs_2TP_2-3_SST 
